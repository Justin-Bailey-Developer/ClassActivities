using System;

using System.Collections.Generic;
using System.Linq;

namespace PROG7311_ICE1{

    public class StudentWorker{

        List<Student> Students { get; set; }

        public StudentWorker(){
            
            PopulateList();

            DisplayMenu();
        }

        public void PopulateList(){

            Students = new List<Student>();
            Students.Add(new FulltimeStudent("19004389", "Justin", "Bailey", "0833807679", "BCAD3", true, 1));
            Students.Add(new ParttimeStudent("18002187", "John", "Doe", "0821234567", "BLAW1", true));
            Students.Add(new FulltimeStudent("20006512", "Jane", "Doe", "0837896541", "BACC2", true, 2));
            Students.Add(new ParttimeStudent("21004226", "Paul", "Lee", "0821234567", "BCOM3", true));
        } 

        public void DisplayMenu(){

            string choice = "";
            //string check = "a b c x";

            while (choice != "x" ){

                Console.WriteLine("\nxEnter one of the following: \n" +
                                    "A) Display full time students \n" +
                                    "B) Display part time students \n" +
                                    "X) Exit program");
            
                choice = Console.ReadLine().ToLower();

                //check if the user entered a valid choice
                if(!ValidateInput(choice))
                {
                    Console.WriteLine("\nAn incorrect value was entered, please try again.");
                }
                
            }
        }


        public bool ValidateInput(string choice){

            string check = "a b c x";
            string input = choice.Trim();
            bool flag = true;

            if(input.Length == 1 && check.Contains(input))
            {
                //check that the user does not want to quit the program
                if(!input.Equals("x")){
                    //flag stays true
                    ProcessChoice(input);
                }
                else
                { //exit the program
                    Console.WriteLine("Exiting program. Goodbye!");
                    System.Environment.Exit(-1);
                }
            }
            else
            {
                flag = false;
            }

            return flag;
        }

        public void ProcessChoice(string choice){

            string input = choice;

            switch(choice)
            {
                case "a": 
                            {
                                List<Student> fullTimeList = Students.
                                Where(x => x.GetType() == typeof(FulltimeStudent))
                                .ToList();

                                for(int x = 0; x<fullTimeList.Count; x++)
                                {
                                    Console.WriteLine(fullTimeList[x].ToString());
                                }
                            }

                    break;

                case "b": 
                            {
                                List<Student> partTimeList = Students.
                                Where(x => x.GetType() == typeof(ParttimeStudent))
                                .ToList();

                                for(int x = 0; x<partTimeList.Count; x++)
                                {
                                    Console.WriteLine(partTimeList[x].ToString());
                                }                                
                            }

                    break;

                default: Console.WriteLine("There was an error");

                    break;
            }

        }
    }
}
